# MicroSim Visualizations

## Available Visualizations

- [PCA Similarity Map](./pca-map/) - Interactive 2D projection of MicroSim embeddings

## PCA Map Data Pipeline

The PCA Map visualization uses a separation of data and presentation:

```
┌─────────────────────────────────────────────────────────────────┐
│                        Input Files                              │
├─────────────────────────────────────────────────────────────────┤
│  data/microsims-embeddings.json     384-dimensional vectors     │
│  docs/search/microsims-data.json    MicroSim metadata           │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│              python src/reports/generate-pca-map.py             │
│                                                                 │
│  1. Load embeddings (384D vectors)                              │
│  2. Load metadata (titles, subjects, URLs)                      │
│  3. Apply PCA dimensionality reduction (384D → 2D)              │
│  4. Group points by subject area with colors                    │
│  5. Generate Plotly-compatible data structure                   │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                   docs/sims/pca-map/                            │
├─────────────────────────────────────────────────────────────────┤
│  data.json   ← Generated by Python (Plotly data + layout)      │
│  main.html   ← Manual edits (title lives in <title> tag)       │
│  script.js   ← Manual edits (loads data.json, renders plot)    │
│  style.css   ← Manual edits (styling)                          │
└─────────────────────────────────────────────────────────────────┘
```

### Regenerating the Data

When embeddings or metadata change, regenerate `data.json`:

```bash
python src/reports/generate-pca-map.py
```

### Editing the Title

The chart title is set in `main.html` via the `<title>` tag. The JavaScript reads `document.title` and uses it for the Plotly chart title (single source of truth).