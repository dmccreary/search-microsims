<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MicroSim Faceted Search - ItemsJS Demo</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>MicroSim Faceted Search <a href="?help" class="help-link">[?]</a></h1>

    <div class="container">
        <div class="search-container">
            <input type="text" id="search-input" placeholder="Search MicroSims by title, description, or concepts...">
        </div>

        <aside class="sidebar">
            <div id="facets"></div>
            <button class="clear-filters" id="clear-filters" style="display: none;">Clear All Filters</button>
        </aside>

        <main class="results-container">
            <div class="results-header">
                <span class="results-count" id="results-count">Loading...</span>
                <select class="sort-select" id="sort-select">
                    <option value="title:asc">Title A-Z</option>
                    <option value="title:desc">Title Z-A</option>
                    <option value="date:desc">Newest First</option>
                    <option value="date:asc">Oldest First</option>
                </select>
            </div>
            <div class="active-filters" id="active-filters"></div>
            <div class="results-grid" id="results"></div>
        </main>
    </div>

    <!-- Help Modal -->
    <div class="help-overlay" id="help-modal" style="display: none;">
        <div class="help-modal">
            <h2>URL Parameters Reference</h2>
            <p>Use URL parameters to create shareable search links.</p>

            <h3>Search</h3>
            <table>
                <tr><th>Parameter</th><th>Description</th><th>Example</th></tr>
                <tr><td><code>q</code></td><td>Full-text search query</td><td><code>?q=physics</code></td></tr>
            </table>

            <h3>Facet Filters</h3>
            <p>Use comma-separated values for multiple selections (OR logic).</p>
            <table>
                <tr><th>Parameter</th><th>Description</th><th>Example Values</th></tr>
                <tr><td><code>subject</code></td><td>Subject Area</td><td>Mathematics, Physics, Computer Science</td></tr>
                <tr><td><code>level</code></td><td>Grade Level</td><td>K-12, Undergraduate, Graduate</td></tr>
                <tr><td><code>bloom</code></td><td>Bloom's Taxonomy</td><td>Remember, Understand, Apply, Analyze, Evaluate, Create</td></tr>
                <tr><td><code>difficulty</code></td><td>Difficulty</td><td>Beginner, Intermediate, Advanced</td></tr>
                <tr><td><code>framework</code></td><td>JavaScript Framework</td><td>p5.js, d3.js, three.js, vanilla-js</td></tr>
                <tr><td><code>viz</code></td><td>Visualization Type</td><td>animation, chart, simulation, diagram</td></tr>
            </table>

            <h3>Sorting</h3>
            <table>
                <tr><th>Parameter</th><th>Values</th></tr>
                <tr><td><code>sort</code></td><td><code>title:asc</code>, <code>title:desc</code>, <code>date:asc</code>, <code>date:desc</code></td></tr>
            </table>

            <h3>Examples</h3>
            <div class="example">?q=wave&subject=Physics&level=Undergraduate</div>
            <div class="example">?framework=p5.js&bloom=Apply,Analyze&sort=date:desc</div>
            <div class="example">?subject=Mathematics,Computer Science&difficulty=Beginner</div>

            <button class="close-btn" onclick="closeHelp()">Close</button>
        </div>
    </div>

    <!-- ItemsJS from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/itemsjs@latest/dist/itemsjs.min.js"></script>
    <!-- Application Script -->
    <script src="script.js"></script>
</body>
</html>
